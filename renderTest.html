<!DOCTYPE html>
<html lang="ko">
    <head>
        <title>πΆμΌμ • λ©λ΅ λ λ”λ§</title>

        <style>
            .todo-item {
                background-color: #fdfdfd;
            }
            .todo-item.completed {
                background-color: #d2ffd2;
            }
        </style>
    </head>

    <body>
        <main>
            <section class="add-todo-section">
                <form aria-label="μƒ μΌμ • μ¶”κ°€ νΌ" id="addTodoForm">
                    <input type="text" placeholder="μƒλ΅μ΄ μΌμ •μ„ μ¶”κ°€ν•μ„Έμ”" name="todo-item-title"/>
                    <button type="submit">μ¶”κ°€</button>
                </form>
            </section>

            <hr>

            <section id="todoListSection" class="todo-list-section">
            </section>
        </main>

        <script>
            renderTodoList(selectTodoList());

            function selectTodoList() {
                // λ΅μ»¬ μ¤ν† λ¦¬μ§€μ—μ„ JSON ν•μ‹μΌλ΅ μ €μ¥λμ–΄ μλ” μΌμ • λ©λ΅ λ°μ΄ν„°λ¥Ό κ°€μ Έμ™€μ„ (todoListJson) λ³€μμ— λ‹΄λ”λ‹¤.( λ΅μ»¬ μ¤ν† λ¦¬μ§€ ν‚¤ : "TODO_LIST_JSON")
                let todoListJson = localStorage.getItem("TODO_LIST_JSON");
                
                // (todoListJson) λ³€μ κ°’μ΄ nullμ΄κ±°λ‚ undefinedκ±°λ‚ λΉ κ°’μ΄λΌλ©΄ (todoListJson) λ³€μμ— λΉ λ°°μ—΄ λ¬Έμμ—΄("[]")μ„ λ‹΄λ”λ‹¤.
                if (todoListJson == null || todoListJson == undefined || todoListJson == "") {
                    todoListJson = "[]";
                }

                // (todoListJson) λ³€μ κ°’μ„ μλ°”μ¤ν¬λ¦½νΈ λ°μ΄ν„°λ΅ λ³€ν™ν•μ—¬ (todoList) λ³€μμ— λ‹΄λ”λ‹¤.
                let todoList = JSON.parse(todoListJson);

                // (todoList) κ°’μ„ λ°ν™ν•λ‹¤.
                return todoList;
            }

            // νλΌλ―Έν„°λ΅ μ „λ‹¬λ°›μ€ μΌμ • λ©λ΅μ„ ν™”λ©΄μ— UIλ΅ ν‘μ‹ν•λ” ν•¨μ
            function renderTodoList(todoList) {
                // μΌμ • λ©λ΅μ„ ν‘μ‹ν•  μ”μ†(#todoListSection)λ¥Ό κ°€μ Έμ™€μ„ (todoListSection) λ³€μμ— λ‹΄λ”λ‹¤.
                let todoListSection = document.getElementById("todoListSection");

                // (todoListSection) μ”μ†μ μμ‹ μ”μ†λ“¤μ„ λ¨λ‘ μ‚­μ ν•λ‹¤.
                todoListSection.innerHTML = "";

                // νλΌλ―Έν„°λ΅ λ°›μ€ (todoList) λ°μ΄ν„°λ¥Ό μνν•λ‹¤. μ΄λ•, μΈλ±μ¤ λ³€μ (i)λ¥Ό μƒμ„±ν•μ—¬ μνν•λ‹¤.
                for (let i = 0;i < todoList.length; i++) {
                    // (todoList) λ°μ΄ν„° μ¤‘ (i)λ²μ§Έ μΌμ • λ°μ΄ν„°λ¥Ό (todoItem) λ³€μμ— λ‹΄λ”λ‹¤.
                    let todoItem = todoList[i];

                    // (todoItem) κ°μ²΄μ id κ°’μ„ (todoItemId) λ³€μμ— λ‹΄λ”λ‹¤.
                    let todoItemId = todoItem.id;

                    // (todoItem) κ°μ²΄μ title κ°’μ„ (todoItemTitle) λ³€μμ— λ‹΄λ”λ‹¤.
                    let todoItemTitle = todoItem.title;

                    // (todoItem) κ°μ²΄μ isCompleted κ°’μ„ (isTodoItemCompleted) λ³€μμ— λ‹΄λ”λ‹¤.
                    let isTodoItemCompleted = todoItem.isCompleted;

                    // (todoItemTitle), (isTodoItemCompleted), (todoItemId) λ³€μλ“¤μ„ μ΄μ©ν•μ—¬ (i)λ²μ§Έ μΌμ • λ°μ΄ν„°λ¥Ό ν™”λ©΄μ— κ·Έλ¦°λ‹¤.
                    todoListSection.innerHTML += `
                        <article class="todo-item ${isTodoItemCompleted ? 'completed' : ''}">
                            <div class="checkbox-wrapper">
                                <input type="checkbox" id="${todoItemId}" ${isTodoItemCompleted ? 'checked' : ''}/>
                                <label for="${todoItemId}">${todoItemTitle}</label>
                            </div>
                            <button type="button" class="delete-btn">μ‚­μ </button>
                        </article>
                    `;
                }
            }
        </script>
    </body>
</html>
